<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans+KR:900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{url_for('static', filename='style1.css')}}">
    <!--Jquery-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <title>waYou</title>
</head>

<body>
    <h1 class="wayou">ì™€ìœ </h1>




    <div class="container">
        <div class="buttonShow">
            ğŸ•³
        </div>
        <div class="whiteBox"></div>
        <div class="img"></div>
        <textarea class="dansang" id="dansang_id" placeholder="ê·¸ëŒ€ì˜ ì§§ì€ ë‹¨ìƒ..." maxlength="50" type="text"
            name="dansang"></textarea>
        <div class="buttonSave" id="buttonSave_id" onclick="postComment()" onMouseOver="this.innerHTML='ğŸ“¸'"
            onMouseOut="this.innerHTML='ğŸ“·'">
            ğŸ“·
        </div>
    </div>
    <!--container class end-->

    <div class="textContainer" id="textContainer_id">
        <div class="spaceBox">
            <br><br><br><br><br>
        </div>
        <!-- <div class="textBox">
            ë‚˜ ì—¬ê¸° ê°€ë´¤ì–´!
        </div> -->
        <!-- <div class="textBox">
            This place is so beautiful. I wonder where it is.
        </div> -->

    </div>
    <!--textContainer class end-->

</body>

<script>
    $('#buttonSave_id').hide();
    //* buttonHide()í•¨ìˆ˜ë§Œìœ¼ë¡œëŠ” reload ì‹œ, buttonì´ ìë™ìœ¼ë¡œ ë‹¤ì‹œ ë‚˜íƒ€ë‚˜ì„œ ìœ„ì˜ ì½”ë“œ ì¶”ê°€

    window.onload = function () {
        getComment();
    }
    //* ì²˜ìŒì— ë²„íŠ¼ì´ hide ë˜ê¸´ í•˜ì§€ë§Œ, ê¸€ìë¥¼ ì“´ë‹¤ê³  í•´ì„œ ì‹¤ì‹œê°„ìœ¼ë¡œ ë²„íŠ¼ì´ ëœ¨ì§€ëŠ” ì•ŠìŒ
    // if ($('#dansang_id').is(':empty')) {
    //     $('#buttonSave_id').hide()
    // } else {
    //     $('#buttonSave_id').show()
    // };

    //* ì•„ì˜ˆ ì²˜ìŒë¶€í„° ë²„íŠ¼ show ë¨
    // if ($('#dansang_id').value == "") {
    //     $('#buttonSave_id').hide()
    // } else {
    //     $('#buttonSave_id').show()
    // };

    //* ì•„ë˜ ì½”ë“œ ì •ìƒì ìœ¼ë¡œ ì‘ë™!!!
    $(document).keyup('.code_textarea', function () {
        let content = $.trim($('#dansang_id').val());
        if (content.length === 0) {
            $('#buttonSave_id').hide();
        } else {
            $('#buttonSave_id').show();
        }
    });




    //* ìµœê·¼ ì½”ë©˜íŠ¸ê°€ ìœ„ë¡œ ì˜¬ë¼ê°€ì•¼ í•˜ëŠ”ë°, ì´ëŸ¬ë©´ ì•„ë˜ë¡œ ë‚´ë ¤ê°
    // function getComment() {
    //     $.ajax({
    //         type: "GET",
    //         url: "/post",
    //         data: {},
    //         success: function (response) {
    //             let textBoxes = response['comments'];
    //             for (let i = 0; i < textBoxes.length; i++) {
    //                 let comment = textBoxes[i]['comment'];
    //                 makeTextBox(comment);
    //             }
    //         }
    //     })
    // }

    //* ìµœê·¼ ì½”ë©˜íŠ¸ê°€ ìœ„ë¡œ ê°€ê²Œë” ìˆ˜ì •
    function getComment() {
        $.ajax({
            type: "GET",
            url: "/post",
            data: {},
            success: function (response) {
                let textBoxes = response['comments'];
                for (let i = textBoxes.length - 1; i > -1; i--) {
                    let comment = textBoxes[i]['comment'];
                    makeTextBox(comment);
                }
            }
        })
    }

    function makeTextBox(comment) {
        let oneTextBox = '<div class="textBox">\
             ' + comment + ' </div>'
        $('#textContainer_id').append(oneTextBox);
    }

    function postComment() {
        let comment = $('#dansang_id').val();
        console.log(comment);

        $.ajax({
            type: "POST",
            url: "/post",
            data: {
                comment_give: comment
            },
            success: function (response) {
                if (response['result'] == 'success') {
                    alert('ì°°ì¹µ');
                    window.location.reload();
                } else {
                    alert('ì™œì§€... ì €ì¥ ì˜¤ë¥˜...')
                }
            },
            error: function (errorAlert) {
                alert('ì™œì§€... ì €ì¥ ì˜¤ë¥˜...')
            }
        })
    }
</script>


</html>